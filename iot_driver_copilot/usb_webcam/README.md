USB Webcam HTTP Driver (UVC to HTTP)

This driver connects to a local USB webcam using UVC (via OpenCV) and exposes a simple HTTP server with two endpoints:

- GET /frame: returns a single JPEG snapshot
- GET /stream: returns an MJPEG stream (multipart/x-mixed-replace)

No native protocol URLs are exposed; the driver actively captures frames and serves them via HTTP.

Prerequisites
- Python 3.8+
- A UVC-compatible USB webcam (e.g., Logitech)
- OpenCV Python bindings

Install
- Option A (virtualenv recommended):
  - pip install -r requirements.txt

Environment Variables
- HTTP_HOST: HTTP server host to bind (default: 0.0.0.0)
- HTTP_PORT: HTTP server port to bind (default: 8000)
- CAM_DEVICE: Camera device identifier. Examples:
  - 0 (default) for the first camera index
  - /dev/video0 for Linux path
- CAM_WIDTH: Desired capture width in pixels (optional)
- CAM_HEIGHT: Desired capture height in pixels (optional)
- CAM_FPS: Desired capture FPS (optional)
- CAM_JPEG_QUALITY: JPEG quality (1-100, default: 80)
- CAM_READ_TIMEOUT_SEC: Timeout waiting for a frame before failing a request/stream (default: 5.0)
- CAM_BACKOFF_BASE_MS: Initial reconnect backoff in milliseconds (default: 500)
- CAM_BACKOFF_MAX_MS: Maximum reconnect backoff in milliseconds (default: 10000)

Run
- Example (default camera index 0 on port 8000):
  - HTTP_HOST=0.0.0.0 HTTP_PORT=8000 CAM_DEVICE=0 python3 driver.py

Usage Examples
- Capture a single frame (JPEG):
  - curl -v http://localhost:8000/frame -o snapshot.jpg
- Open a live MJPEG stream in browser or via curl:
  - curl http://localhost:8000/stream

Notes
- If you specify CAM_WIDTH/HEIGHT/FPS, the driver will request those settings from the camera; actual values may differ depending on device support.
- If the camera disconnects, the driver will retry with exponential backoff.
- On Linux, ensure your user has permission to access /dev/video* (e.g., add to the video group).

Generated by [IoT Driver Copilot](https://copilot.test.shifu.dev/)
